"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2198],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),d=r,h=c["".concat(s,".").concat(d)]||c[d]||m[d]||o;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(7294),r=n(4334),o="tabItem_Ymn6";function l(e){var t=e.children,n=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:n},t)}},4866:function(e,t,n){n.d(t,{Z:function(){return N}});var a=n(3117),r=n(7294),o=n(4334),l=n(6775),i=n(1980),s=n(7392),u=n(12);function p(e){return function(e){return r.Children.map(e,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function m(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:p(n);return function(e){var t=(0,s.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function c(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function d(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,o=(0,l.k6)(),s=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,i._X)(s),(0,r.useCallback)((function(e){if(s){var t=new URLSearchParams(o.location.search);t.set(s,e),o.replace(Object.assign({},o.location,{search:t.toString()}))}}),[s,o])]}function h(e){var t,n,a,o,l=e.defaultValue,i=e.queryString,s=void 0!==i&&i,p=e.groupId,h=m(e),f=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!c({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:l,tabValues:h})})),g=f[0],v=f[1],k=d({queryString:s,groupId:p}),b=k[0],y=k[1],w=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:p}.groupId),n=(0,u.Nk)(t),a=n[0],o=n[1],[a,(0,r.useCallback)((function(e){t&&o.set(e)}),[t,o])]),N=w[0],E=w[1],T=function(){var e=null!=b?b:N;return c({value:e,tabValues:h})?e:null}();return(0,r.useLayoutEffect)((function(){T&&v(T)}),[T]),{selectedValue:g,selectValue:(0,r.useCallback)((function(e){if(!c({value:e,tabValues:h}))throw new Error("Can't select invalid tab value="+e);v(e),y(e),E(e)}),[y,E,h]),tabValues:h}}var f=n(2466),g=n(2389),v="tabList__CuJ",k="tabItem_LNqP";function b(e){var t=e.className,n=e.block,l=e.selectedValue,i=e.selectValue,s=e.tabValues,u=[],p=(0,f.o5)().blockElementScrollPositionUntilNextRender,m=function(e){var t=e.currentTarget,n=u.indexOf(t),a=s[n].value;a!==l&&(p(t),i(a))},c=function(e){var t,n=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":var a,r=u.indexOf(e.currentTarget)+1;n=null!=(a=u[r])?a:u[0];break;case"ArrowLeft":var o,l=u.indexOf(e.currentTarget)-1;n=null!=(o=u[l])?o:u[u.length-1]}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},s.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:function(e){return u.push(e)},onKeyDown:c,onClick:m},i,{className:(0,o.Z)("tabs__item",k,null==i?void 0:i.className,{"tabs__item--active":l===t})}),null!=n?n:t)})))}function y(e){var t=e.lazy,n=e.children,a=e.selectedValue;if(n=Array.isArray(n)?n:[n],t){var o=n.find((function(e){return e.props.value===a}));return o?(0,r.cloneElement)(o,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},n.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function w(e){var t=h(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",v)},r.createElement(b,(0,a.Z)({},e,t)),r.createElement(y,(0,a.Z)({},e,t)))}function N(e){var t=(0,g.Z)();return r.createElement(w,(0,a.Z)({key:String(t)},e))}},5156:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return f},frontMatter:function(){return u},metadata:function(){return m},toc:function(){return d}});var a=n(3117),r=n(102),o=(n(7294),n(3905)),l=(n(9960),n(4866)),i=n(5162),s=["components"],u={toc_min_heading_level:2,toc_max_heading_level:3},p="REPL Console",m={unversionedId:"cli/repl",id:"cli/repl",title:"REPL Console",description:"Interactive Gwen shell",source:"@site/docs/08-cli/02-repl.mdx",sourceDirName:"08-cli",slug:"/cli/repl",permalink:"/docs/cli/repl",draft:!1,editUrl:"https://github.com/gwen-interpreter/gwen-interpreter.github.io/edit/master/docs/08-cli/02-repl.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{toc_min_heading_level:2,toc_max_heading_level:3},sidebar:"tutorialSidebar",previous:{title:"Gwen CLI",permalink:"/docs/cli"},next:{title:"Interactive",permalink:"/docs/modes/interactive"}},c={},d=[{value:"Interactive Gwen shell",id:"interactive-gwen-shell",level:2},{value:"Starting the REPL",id:"starting-the-repl",level:3},{value:"REPL commands",id:"repl-commands",level:3},{value:"Tab completion",id:"tab-completion",level:3},{value:"Paste mode",id:"paste-mode",level:3},{value:"Meta reloads",id:"meta-reloads",level:3},{value:"Exiting the REPL",id:"exiting-the-repl",level:3}],h={toc:d};function f(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"repl-console"},"REPL Console"),(0,o.kt)("h2",{id:"interactive-gwen-shell"},"Interactive Gwen shell"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Since ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0"},"v1.0.0"))),(0,o.kt)("p",null,"Gwen comes with a REPL (Read-Eval-Print-Loop) console. This is a command line shell that prompts you for steps, evaluates them, and outputs their status in real time. It enables you to experiment and observe the execution of steps as you enter (or paste) them which is very useful for debugging and analysis. Everything you enter is stored in a local history file and you can use the up and down arrow keys to recall previous inputs."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"   __ ___      _____ _ __     _    \n  / _` \\ \\ /\\ / / _ \\ '_ \\   { \\,\" \n | (_| |\\ V  V /  __/ | | | {_`/   \n  \\__, | \\_/\\_/ \\___|_| |_|   `    \n  |___/                            \n                                   \nWelcome to gwen-web v<version>\ngweninterpreter.org\n\nINFO - Default Gherkin feature dialect is: en\nINFO - Environment context initialised\nINFO - gwen-web.sh \n\nREPL Console\n\nEnter steps to evaluate or type exit to quit..\n\ngwen>\n")),(0,o.kt)("h3",{id:"starting-the-repl"},"Starting the REPL"),(0,o.kt)("p",null,"To start a REPL session, invoke the ",(0,o.kt)("a",{parentName:"p",href:"/docs/cli"},"Gwen CLI")," without specifying the ",(0,o.kt)("inlineCode",{parentName:"p"},"-b")," (or ",(0,o.kt)("inlineCode",{parentName:"p"},"--batch"),") switch."),(0,o.kt)(l.Z,{groupId:"setup",defaultValue:"project",values:[{label:"Project",value:"project"},{label:"Standalone",value:"standalone"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"project",mdxType:"TabItem"},(0,o.kt)(l.Z,{groupId:"jstool",defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"npm",value:"npm"},{label:"pnpm",value:"pnpm"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("admonition",{title:"Open REPL",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To open a new REPL session:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn gwen\n")),(0,o.kt)("p",{parentName:"admonition"},"To load meta and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn gwen -m path/to/file.meta\n")),(0,o.kt)("p",{parentName:"admonition"},"To execute a feature and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn gwen path/to/file.feature\n")))),(0,o.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("admonition",{title:"Open REPL",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To open a new REPL session:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm run gwen\n")),(0,o.kt)("p",{parentName:"admonition"},"To load meta and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm run gwen -- -m path/to/file.meta\n")),(0,o.kt)("p",{parentName:"admonition"},"To execute a feature and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm run gwen path/to/file.feature\n")))),(0,o.kt)(i.Z,{value:"pnpm",mdxType:"TabItem"},(0,o.kt)("admonition",{title:"Open REPL",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To open a new REPL session:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"pnpm gwen\n")),(0,o.kt)("p",{parentName:"admonition"},"To load meta and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"pnpm gwen -m path/to/file.meta\n")),(0,o.kt)("p",{parentName:"admonition"},"To execute a feature and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"pnpm gwen path/to/file.feature\n")))))),(0,o.kt)(i.Z,{value:"standalone",mdxType:"TabItem"},(0,o.kt)(l.Z,{groupId:"os",defaultValue:"linux",values:[{label:"Linux",value:"linux"},{label:"Windows",value:"windows"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"linux",mdxType:"TabItem"},(0,o.kt)("admonition",{title:"Open REPL",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To open a new REPL session:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen\n")),(0,o.kt)("p",{parentName:"admonition"},"To load meta and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen -m path/to/file.meta\n")),(0,o.kt)("p",{parentName:"admonition"},"To execute a feature and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen path/to/file.feature\n")))),(0,o.kt)(i.Z,{value:"windows",mdxType:"TabItem"},(0,o.kt)("admonition",{title:"Open REPL",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To open a new REPL session:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen\n")),(0,o.kt)("p",{parentName:"admonition"},"To load meta and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen -m path\\to\\file.meta\n")),(0,o.kt)("p",{parentName:"admonition"},"To execute a feature and open the REPL:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen path\\to\\file.feature\n"))))))),(0,o.kt)("h3",{id:"repl-commands"},"REPL commands"),(0,o.kt)("p",null,"Once in the REPL, you can type ",(0,o.kt)("inlineCode",{parentName:"p"},"help")," at the ",(0,o.kt)("inlineCode",{parentName:"p"},"gwen>")," prompt to list the available commands."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'Gwen REPL commands:\n\nhelp\n  Displays this help text\n\nenv [switch] ["filter"]\n  Lists attributes in the current environment\n    Only lists visible attributes if no options are specified\n    switch : (optional)\n      -a : to list all attributes in all scopes\n      -f : to list all attributes in the feature (global) scope\n    filter : (optional) literal string or regex filter expression\n\n:paste|paste\n   Enters paste mode (for evaluating multiline steps)\n\nhistory\n  Lists all previously entered commands\n\n!#\n  Executes a previously entered command (history bang operator)\n    # : the history command number\n\nload <meta-file>\n  Loads a meta file to pick up any changes\n    meta-file : the path to the meta file relative to project root\n\nGiven|When|Then|And|But step-expression\n  Evaluates a step\n    step-expression : the step expression\n\nq|exit|quit|bye\n  Closes the REPL session and exits\n\nctrl-D\n   If in paste mode: exits paste mode and interprets provided steps\n   Otherwise: Closes REPL session and exits\n\ntab\n  Press the tab key for tab completion\n\nc|continue|resume\n  Continue executing from current breakpoint step (debug mode only)\n\n')),(0,o.kt)("h3",{id:"tab-completion"},"Tab completion"),(0,o.kt)("p",null,"You can press the tab key at any time to lookup and select available commands, ",(0,o.kt)("a",{parentName:"p",href:"/docs/dsl/reference"},"DSL Steps")," and custom ",(0,o.kt)("a",{parentName:"p",href:"/docs/meta#stepdefs"},"StepDefs"),"."),(0,o.kt)("h3",{id:"paste-mode"},"Paste mode"),(0,o.kt)("p",null,"Should you attempt to enter a multiline step into the REPL, you will quickly discover that the first line will execute and fail as soon as you enter it without waiting for you to enter the remaining lines first. To address this, we have introduced a ",(0,o.kt)("em",{parentName:"p"},"paste")," mode. "),(0,o.kt)("p",null,"To enable paste mode, type ",(0,o.kt)("inlineCode",{parentName:"p"},":paste")," into the REPL prompt. The following will appear.."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"gwen> :paste\n\nREPL Console (paste mode)\n\nEnter or paste steps and press ctrl-D to evaluate..\n\n")),(0,o.kt)("p",null,"You will then be able to enter or paste a multiple step without anything being executed when you press the enter key for each new line. For example, you could enter the following without any lines being executed prematurely:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," When the following items are added\n      | Item          |\n      | Get the milk  |\n      | Walk the dog  |\n\n")),(0,o.kt)("p",null,"Then when you're ready to execute or want to exit the ",(0,o.kt)("em",{parentName:"p"},"paste")," mode, insert a new empty line at the end and press press ",(0,o.kt)("inlineCode",{parentName:"p"},"ctrl-D"),". The REPL will then evaluate the step you entered before the empty line and return to the standard prompt when done."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Exiting paste mode, interpreting now..\n\ngwen>  When the following items are added\n            | Item          |\n            | Get the milk  |\n            | Walk the dog  |\n\nINFO - Evaluating Step: When the following items are added\n..\nREPL Console\n\nEnter steps to evaluate or type exit to quit..\n\ngwen>\n")),(0,o.kt)("h3",{id:"meta-reloads"},"Meta reloads"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Since ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v3.36.0"},"v3.36.0"))),(0,o.kt)("p",null,"If you make changes to a meta file whilst in a REPL session, you can reload the changes by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"load")," command. This can save you time during meta development so you don't have to end your current REPL session and start a new one to pick up the changes. "),(0,o.kt)("p",null,"Reload a changed meta file in your current REPL session as follows. New or changed ",(0,o.kt)("a",{parentName:"p",href:"docs/meta#stepdefs"},"StepDef"),"'s in the meta file will be immediately available after running the command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"gwen> load path/to/changed.meta\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"The path to the meta file must be relative to your project root directory where you launched Gwen.")),(0,o.kt)("admonition",{title:"Potential effects on state",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Any scenarios in your meta that are NOT StepDefs will be re-evaluated on reload and this could result in side effects that modify the current state. Consider refactoring your meta to only declare StepDefs to avoid this impact.")),(0,o.kt)("h3",{id:"exiting-the-repl"},"Exiting the REPL"),(0,o.kt)("p",null,"To exit the REPL, enter ",(0,o.kt)("inlineCode",{parentName:"p"},"q"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"quit"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"exit"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"bye")," or press ",(0,o.kt)("inlineCode",{parentName:"p"},"ctrl-D")," at the gwen prompt."))}f.isMDXComponent=!0}}]);