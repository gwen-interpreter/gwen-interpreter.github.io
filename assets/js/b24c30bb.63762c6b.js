"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3608],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),s=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=s(e.components);return a.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=s(t),m=r,h=d["".concat(u,".").concat(m)]||d[m]||c[m]||l;return t?a.createElement(h,i(i({ref:n},p),{},{components:t})):a.createElement(h,i({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=d;var o={};for(var u in n)hasOwnProperty.call(n,u)&&(o[u]=n[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5162:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(7294),r=t(4334),l="tabItem_Ymn6";function i(e){var n=e.children,t=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l,i),hidden:t},n)}},4866:function(e,n,t){t.d(n,{Z:function(){return N}});var a=t(3117),r=t(7294),l=t(4334),i=t(6775),o=t(1980),u=t(7392),s=t(12);function p(e){return function(e){var n,t;return null!=(n=null==(t=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(n=e.props)&&"object"==typeof n&&"value"in n)return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}function c(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:p(t);return function(e){var n=(0,u.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function d(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function m(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,l=(0,i.k6)(),u=function(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:a});return[(0,o._X)(u),(0,r.useCallback)((function(e){if(u){var n=new URLSearchParams(l.location.search);n.set(u,e),l.replace(Object.assign({},l.location,{search:n.toString()}))}}),[u,l])]}function h(e){var n,t,a,l,i=e.defaultValue,o=e.queryString,u=void 0!==o&&o,p=e.groupId,h=c(e),f=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var r=null!=(n=a.find((function(e){return e.default})))?n:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:i,tabValues:h})})),k=f[0],b=f[1],v=m({queryString:u,groupId:p}),g=v[0],y=v[1],w=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:p}.groupId),t=(0,s.Nk)(n),a=t[0],l=t[1],[a,(0,r.useCallback)((function(e){n&&l.set(e)}),[n,l])]),N=w[0],x=w[1],C=function(){var e=null!=g?g:N;return d({value:e,tabValues:h})?e:null}();return(0,r.useLayoutEffect)((function(){C&&b(C)}),[C]),{selectedValue:k,selectValue:(0,r.useCallback)((function(e){if(!d({value:e,tabValues:h}))throw new Error("Can't select invalid tab value="+e);b(e),y(e),x(e)}),[y,x,h]),tabValues:h}}var f=t(2466),k=t(2389),b="tabList__CuJ",v="tabItem_LNqP";function g(e){var n=e.className,t=e.block,i=e.selectedValue,o=e.selectValue,u=e.tabValues,s=[],p=(0,f.o5)().blockElementScrollPositionUntilNextRender,c=function(e){var n=e.currentTarget,t=s.indexOf(n),a=u[t].value;a!==i&&(p(n),o(a))},d=function(e){var n,t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":var a,r=s.indexOf(e.currentTarget)+1;t=null!=(a=s[r])?a:s[0];break;case"ArrowLeft":var l,i=s.indexOf(e.currentTarget)-1;t=null!=(l=s[i])?l:s[s.length-1]}null==(n=t)||n.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":t},n)},u.map((function(e){var n=e.value,t=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,key:n,ref:function(e){return s.push(e)},onKeyDown:d,onClick:c},o,{className:(0,l.Z)("tabs__item",v,null==o?void 0:o.className,{"tabs__item--active":i===n})}),null!=t?t:n)})))}function y(e){var n=e.lazy,t=e.children,a=e.selectedValue,l=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var i=l.find((function(e){return e.props.value===a}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})})))}function w(e){var n=h(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",b)},r.createElement(g,(0,a.Z)({},e,n)),r.createElement(y,(0,a.Z)({},e,n)))}function N(e){var n=(0,k.Z)();return r.createElement(w,(0,a.Z)({key:String(n)},e))}},2976:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var a=t(3117),r=t(102),l=(t(7294),t(3905)),i=(t(9960),t(4866),t(5162),t(4996),["components"]),o={toc_min_heading_level:2,toc_max_heading_level:4},u="Execution Modes",s={unversionedId:"execution-modes",id:"execution-modes",title:"Execution Modes",description:"Batch",source:"@site/docs/08-execution-modes.mdx",sourceDirName:".",slug:"/execution-modes",permalink:"/docs/execution-modes",draft:!1,editUrl:"https://github.com/gwen-interpreter/gwen-interpreter.github.io/edit/master/docs/08-execution-modes.mdx",tags:[],version:"current",sidebarPosition:8,frontMatter:{toc_min_heading_level:2,toc_max_heading_level:4},sidebar:"tutorialSidebar",previous:{title:"REPL Console",permalink:"/docs/cli/repl"},next:{title:"Console Reports",permalink:"/docs/reports/console"}},p={},c=[{value:"Batch",id:"batch",level:2},{value:"Interactive REPL",id:"interactive-repl",level:2},{value:"Sequential",id:"sequential",level:2},{value:"Parallel",id:"parallel",level:2},{value:"Maximum threads",id:"maximum-threads",level:3},{value:"Parallel feature execution",id:"parallel-feature-execution",level:3},{value:"Parallel scenario execution",id:"parallel-scenario-execution",level:3},{value:"Staggering",id:"staggering",level:3},{value:"Example:",id:"example",level:5},{value:"Dry Runs",id:"dry-runs",level:2},{value:"Catch syntax and binding errors",id:"catch-syntax-and-binding-errors",level:3},{value:"Example",id:"example-1",level:5},{value:"DryRun Annotations",id:"dryrun-annotations",level:3},{value:"Example",id:"example-2",level:5},{value:"A non-ideal workaround",id:"a-non-ideal-workaround",level:5},{value:"Single Values",id:"single-values",level:4},{value:"Multiple Values",id:"multiple-values",level:4},{value:"Delimited Values",id:"delimited-values",level:4}],d={toc:c};function m(e){var n=e.components,o=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,o,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"execution-modes"},"Execution Modes"),(0,l.kt)("h2",{id:"batch"},"Batch"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0"},"v1.0.0"))),(0,l.kt)("p",null,"Batch mode forces Gwen to immediately exit after a given feature or features have executed. You should always invoke Gwen in batch mode on server environments such as build servers."),(0,l.kt)("p",null,"To execute Gwen in batch mode, simply specify the ",(0,l.kt)("a",{parentName:"p",href:"/docs/cli#gwen-cli-options-batch"},(0,l.kt)("inlineCode",{parentName:"a"},"-b|--batch"))," command line switch. Omitting it will open the ",(0,l.kt)("a",{parentName:"p",href:"/docs/cli/repl"},"REPL")," otherwise."),(0,l.kt)("h2",{id:"interactive-repl"},"Interactive REPL"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0"},"v1.0.0"))),(0,l.kt)("p",null,"Gwen will open the ",(0,l.kt)("a",{parentName:"p",href:"/docs/cli/repl"},"REPL console")," when it finishes executing features unless ",(0,l.kt)("a",{parentName:"p",href:"/docs/execution-modes#batch"},"batch")," mode is enabled."),(0,l.kt)("h2",{id:"sequential"},"Sequential"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0"},"v1.0.0"))),(0,l.kt)("p",null,"Gwen will execute given feature files one after the other unless ",(0,l.kt)("a",{parentName:"p",href:"/docs/execution-modes#parallel"},"parallel")," execution is enabled."),(0,l.kt)("h2",{id:"parallel"},"Parallel"),(0,l.kt)("p",null,"Gwen can execute features and scenarios in parallel threads."),(0,l.kt)("h3",{id:"maximum-threads"},"Maximum threads"),(0,l.kt)("p",null,"The maximum number of parallel threads can be controlled through the following setting:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/docs/settings/reference#gwen-parallel-maxThreads"},(0,l.kt)("inlineCode",{parentName:"a"},"gwen.parallel.maxThreads")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"By default this is set to ",(0,l.kt)("inlineCode",{parentName:"li"},"auto"),", meaning that one thread will execute on each available CPU core (for example: 8 threads would execute on an 8 core machine)"),(0,l.kt)("li",{parentName:"ul"},"This can be set to a desired number of threads",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"When less than the number of available cores, the remaining cores will be free"),(0,l.kt)("li",{parentName:"ul"},"When greater than the number of available cores, more than one thread may execute on some or all cores (use judiciously)")))))),(0,l.kt)("h3",{id:"parallel-feature-execution"},"Parallel feature execution"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0"},"v1.0.0"))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Features will run in parallel if you specify:"),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"the ",(0,l.kt)("a",{parentName:"li",href:"/docs/cli#gwen-cli-options-parallel"},(0,l.kt)("inlineCode",{parentName:"a"},"--parallel"))," CLI option and your ",(0,l.kt)("a",{parentName:"li",href:"/docs/settings/reference#gwen-state-level"},"state level")," is set to ",(0,l.kt)("inlineCode",{parentName:"li"},"feature")))),(0,l.kt)("p",null,"When ",(0,l.kt)("a",{parentName:"p",href:"#maximum-threads"},(0,l.kt)("inlineCode",{parentName:"a"},"maxThreads"))," is ",(0,l.kt)("inlineCode",{parentName:"p"},"auto")," (default)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you launch Gwen on an 8 core machine with the ",(0,l.kt)("inlineCode",{parentName:"li"},"--parallel")," option passing in 8 feature files (or a single directory containing 8 feature files), then the 8 features will run in parallel across the cores. If you instead provide 9 features, then 8 of them will execute in parallel and the remaining feature execution will be deferred until one of those completes.")),(0,l.kt)("h3",{id:"parallel-scenario-execution"},"Parallel scenario execution"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v2.22.1"},"v2.22.1"))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Scenarios will run in parallel if you specify:"),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"the ",(0,l.kt)("a",{parentName:"li",href:"/docs/cli#gwen-cli-options-parallel"},(0,l.kt)("inlineCode",{parentName:"a"},"--parallel"))," CLI option and your ",(0,l.kt)("a",{parentName:"li",href:"/docs/settings/reference#gwen-state-level"},"state level")," is set to ",(0,l.kt)("inlineCode",{parentName:"li"},"scenario")))),(0,l.kt)("p",null,"When ",(0,l.kt)("a",{parentName:"p",href:"#maximum-threads"},(0,l.kt)("inlineCode",{parentName:"a"},"maxThreads"))," is ",(0,l.kt)("inlineCode",{parentName:"p"},"auto")," (default)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you launch Gwen on a 8 core machine with the ",(0,l.kt)("inlineCode",{parentName:"li"},"--parallel")," option passing in many feature files (or a single directory containing many feature files), then at most 8 scenarios will run in parallel across the cores at any one time. If there are a total of 9 scenarios, then 8 of them will execute in parallel and the remaining scenario execution be deferred until one of those completes.")),(0,l.kt)("h3",{id:"staggering"},"Staggering"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.1.0"},"v1.1.0"))),(0,l.kt)("p",null,"An optional ",(0,l.kt)("a",{parentName:"p",href:"/docs/settings/reference#gwen-rampup-interval-seconds"},"ramp up interval")," can be configured to stagger parallel executions."),(0,l.kt)("h5",{id:"example"},"Example:"),(0,l.kt)("p",null,"A 5 second interval would stagger parallel feature executions like this over 4 cores:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"    time  00   05   10   15   seconds\n          \u2502    \u2502    \u2502    \u2502\n  core 1  \u2502<\u2500\u2500 feature 1a \u2500\u2500>|<\u2500\u2500 feature 1b \u2500\u2500> ..\n  core 2  \u2502    \u2502<\u2500\u2500 feature 2a \u2500\u2500>|<\u2500\u2500 feature 2b \u2500\u2500> ..\n  core 3  \u2502    \u2502    \u2502<\u2500\u2500 feature 3a \u2500\u2500>|<\u2500\u2500 feature 3b \u2500\u2500> ..\n  core 4  \u2502    \u2502    \u2502    \u2502<\u2500\u2500 feature 4a \u2500\u2500>|<\u2500\u2500 feature 4b \u2500\u2500> ..\n")),(0,l.kt)("h2",{id:"dry-runs"},"Dry Runs"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0"},"v1.0.0"))),(0,l.kt)("h3",{id:"catch-syntax-and-binding-errors"},"Catch syntax and binding errors"),(0,l.kt)("p",null,"Dry runs can be performed on features to verify that they are syntactically correct and that all references have bindings that will resolve at runtime. This allows you to quickly validate features and catch potential errors before committing them to an execution cycle. The ",(0,l.kt)("a",{parentName:"p",href:"/docs/cli#gwen-cli-options-dry-run"},(0,l.kt)("inlineCode",{parentName:"a"},"-n|--dry-run"))," CLI option is used to launch Gwen in this mode."),(0,l.kt)("p",null,"The primary purpose of dry runs is to perform static validation of all syntax, bindings and ",(0,l.kt)("a",{parentName:"p",href:"/docs/meta#stepdefs"},"StepDefs")," throughout your feature and ",(0,l.kt)("a",{parentName:"p",href:"/docs/meta"},"meta")," files. In a dry run:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Browsers sessions are never started"),(0,l.kt)("li",{parentName:"ul"},"Web pages are never loaded (and web elements can therefore cannot be accessed)"),(0,l.kt)("li",{parentName:"ul"},"Non static bindings are never evaluated"),(0,l.kt)("li",{parentName:"ul"},"JavaScript is never evaluated"),(0,l.kt)("li",{parentName:"ul"},"System processes are never evaluated"),(0,l.kt)("li",{parentName:"ul"},"Databases are never accessed")),(0,l.kt)("p",null,"Results will be logged to the console and in ",(0,l.kt)("a",{parentName:"p",href:"/docs/reports/html"},"HTML reports")," that you can inspect to find discovered issues."),(0,l.kt)("h5",{id:"example-1"},"Example"),(0,l.kt)("p",null,"If you leave out or forget to define a selector for an input field, it would be detected by a dry run and reported in the HTML report as follows:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Example dry run with error",src:t(4314).Z,width:"1588",height:"1118"})),(0,l.kt)("h3",{id:"dryrun-annotations"},"DryRun Annotations"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Since ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v3.55.0"},"v3.55.0"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun")," annotations can be used on any step to assign a value (or values) to a named reference at dry-runtime and are very useful when: "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"You want to exercise a step definition over a fixed set of inputs"),(0,l.kt)("li",{parentName:"ul"},"Or a binding cannot be evaluated and causes failures that otherwise would not occur outside of a dry run")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"DryRun annotations are only honoured by dry runs and are completely ignored otherwise.")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"Use DryRun annotations sparingly or when necessary only.")),(0,l.kt)("h5",{id:"example-2"},"Example"),(0,l.kt)("p",null,"Consider a ",(0,l.kt)("a",{parentName:"p",href:"/docs/meta"},"meta")," file with the following step definitions:"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"meta")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin"},'  @StepDef\n  Scenario: I perform step 1\n    Then number should be "1"\n\n  @StepDef\n  Scenario: I perform step 2\n    Then number should not be "1"\n')),(0,l.kt)("p",null,"Consider the following scenario where you might want to call the 1st or 2nd step definition depending on the value contained in some number displayed on a web page."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{3}","{3}":!0},'  Scenario: Perfom a step\n    Given number can be located by css ".n"\n     When I perform step ${number}\n')),(0,l.kt)("p",null,"This would work perfectly fine when ",(0,l.kt)("inlineCode",{parentName:"p"},"${number}")," evaluates to 1 or 2 in a web page loaded in a browser. However during a dry run, browsers sessions are never started, web pages are never loaded and looking up web elements and fetching their values is therfore not possible. The 2nd step above would fail since the number in the web element is nowhere to be found. In this instance, the standard Gwen behavior is to return a dry run placeholder value of ",(0,l.kt)("inlineCode",{parentName:"p"},"$[dryValue:webElementText]"),". That 2nd step would resolve to the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin"},"  When I perform step $[dryValue:webElementText]\n")),(0,l.kt)("p",null,"This would result in an undefined step error being reported since it cannot be matched to any step definition in our meta."),(0,l.kt)("h5",{id:"a-non-ideal-workaround"},"A non-ideal workaround"),(0,l.kt)("p",null,"Before ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun")," annotations were introduced, one way to work around this problem involved introducing predicates and using those as guards on calls to each step definition explicitly as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2-5}","{2-5}":!0},'  Given number can be located by css ".n"\n    And number 1 is defined by js "${number} == 1"\n    And number 2 is defined by js "${number} == 2"\n   When I perform step 1 if number 1\n    And I perform step 2 if number 2\n   Then ..\n')),(0,l.kt)("p",null,"This works because Gwen always resolves predicates to ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," values in dry runs. However, this is not ideal because it forces you to break your abstraction and introduces unwanted redundancies. This is the primary reason why ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun")," annotations were introduced; to avoid this kind of workaround."),(0,l.kt)("h4",{id:"single-values"},"Single Values"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Annotation synax: ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun(name='<name>',value='<value>')"))),(0,l.kt)("p",null,"The solution is to provide a dry run value for the ",(0,l.kt)("inlineCode",{parentName:"p"},"number")," reference in the step using the ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun")," annotation as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{3}","{3}":!0},"  Scenario: Perform a step\n    Given number can be located by css \".n\"\n     When I perform step ${number}    @DryRun(name='number',value='1')\n     Then ..\n")),(0,l.kt)("p",null,"Now when you do a dry run on this, the ",(0,l.kt)("inlineCode",{parentName:"p"},"${number}")," reference will take on the value ",(0,l.kt)("inlineCode",{parentName:"p"},"1")," and resolve to the following step:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin"},"  When I perform step 1\n")),(0,l.kt)("p",null,"This would result in a successful dry run of the 1st step definition."),(0,l.kt)("h4",{id:"multiple-values"},"Multiple Values"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Annotation synax: ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun(name='<name>',value={'<value-1>','<value-2>','<value-N>'})"))),(0,l.kt)("p",null,"What if we wanted to exercise both step definitions 1 and 2 in the meta? The solution is to provide a list of dry run values for ",(0,l.kt)("inlineCode",{parentName:"p"},"number")," on the calling step using the ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun")," annotation as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{3}","{3}":!0},"  Scenario: Perform a step\n    Given number can be located by css \".n\"\n     When I perform step ${number}    @DryRun(name='number',value={'1','2'})\n     Then ..\n")),(0,l.kt)("p",null,"Now when you perform a dry run on this, the ",(0,l.kt)("inlineCode",{parentName:"p"},"${number}")," reference will take on the value ",(0,l.kt)("inlineCode",{parentName:"p"},"1")," followed by ",(0,l.kt)("inlineCode",{parentName:"p"},"2")," and the 2nd step above will be expanded in-place into the following two steps:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin"},"  When I perform step 1\n   And I perform step 2\n")),(0,l.kt)("p",null,"This will result in a successful dry run of both the 1st and 2nd step definitions. So now the entire meta will be exercised."),(0,l.kt)("h4",{id:"delimited-values"},"Delimited Values"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Annotation synax: ",(0,l.kt)("inlineCode",{parentName:"p"},"@DryRun(name='<name>',value='<value-1> <value-2> <value-N>')")," (space delimited example)")),(0,l.kt)("p",null,"Similarly, you can also assign a dry run value to any binding that cannot be evaluated during in dry run mode such as a JavaScript binding, for example."),(0,l.kt)("p",null,"Consider the following where you want to source a space delmited list of numbers from a script and loop over each one and call the step definition with that number."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"meta")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{10-11} showLineNumbers","{10-11}":!0,showLineNumbers:!0},'  @StepDef\n  Scenario: I perform step 1\n    Then number should be "1"\n    \n  @StepDef\n  Scenario: I perform step 2\n    Then number should not be "1"\n\n  Scenario: Perform all steps\n    Given numbers is defined by js "$(\'.n\').toArray().join(\' \')"\n     When I perform step ${number} for each number in numbers delimited by " "\n     Then ..\n')),(0,l.kt)("p",null,"The call to the step in the loop on line 11 would fail in a dry run scenario, resulting in an undefined step error because it would resolve to the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin"},"   When I perform step $[dryValue:javascript]\n")),(0,l.kt)("p",null,"In this instance, Gwen will have assigned the ",(0,l.kt)("inlineCode",{parentName:"p"},"$[dryValue:javascript]")," placeholder value to the ",(0,l.kt)("inlineCode",{parentName:"p"},"numbers")," binding on line 10 since it is defined with a JavaScript expression which cannot be evaluated at dry-runtime. This placeholder value would then used to feed the loop, and since it has no spaces in it, the entire value itself becomes the sole undelimited value."),(0,l.kt)("p",null,"The solution is to assign a space delimited dry run value of ",(0,l.kt)("inlineCode",{parentName:"p"},"1 2")," to the ",(0,l.kt)("inlineCode",{parentName:"p"},"numbers")," binding as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{1}","{1}":!0}," Given numbers is defined by js \"$('.n').toArray().join(' ')\"   @DryRun(name='numbers',value='1 2')\n  When I perform step ${number} for each number in numbers delimited by \" \"\n  Then ..\n")),(0,l.kt)("p",null,"Note: If you're using the ",(0,l.kt)("a",{parentName:"p",href:"/docs/doc-strings"},"DocString")," synax, you can do it like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{1-4}","{1-4}":!0},"  Given numbers is defined by js    @DryRun(name='numbers',value='1 2')\n        \"\"\"\n        $('.n').toArray().join(' ')\n        \"\"\"\n    When I perform step ${number} for each number in numbers delimited by \" \"\n    Then ..\n")),(0,l.kt)("p",null,"Now when you perform a dry run, the ",(0,l.kt)("inlineCode",{parentName:"p"},"numbers")," reference will take on the value ",(0,l.kt)("inlineCode",{parentName:"p"},"1 2")," and both our step definitions will be called in the the loop:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-gherkin"},"  When I perform step 1\n   And I perform step 2\n")),(0,l.kt)("p",null,"This will result in a successful dry run of both step definitions."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"You can also source values from settings in annotations using the ",(0,l.kt)("inlineCode",{parentName:"p"},"${setting.name}")," syntax in the ",(0,l.kt)("inlineCode",{parentName:"p"},"value")," attribute, should you wish to externalise your dry run values.")))}m.isMDXComponent=!0},4314:function(e,n,t){n.Z=t.p+"assets/images/sample-html-dry-run-error-58c7602e7bc964072748e8be38799f33.png"}}]);