"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[285],{5164:function(e,a,n){n.r(a),n.d(a,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return h},toc:function(){return c},default:function(){return p}});var t=n(7462),d=n(3366),r=(n(7294),n(3905)),o=n(6742),i=(n(5064),n(8215),["components"]),l={},s="Data Tables",h={unversionedId:"advanced/data-tables",id:"advanced/data-tables",isDocsHomePage:!1,title:"Data Tables",description:"Steps containing data tables can be processed by StepDefs using the @DataTable annotation.",source:"@site/docs/08-advanced/01-data-tables.mdx",sourceDirName:"08-advanced",slug:"/advanced/data-tables",permalink:"/docs/advanced/data-tables",editUrl:"https://github.com/gwen-interpreter/gwen-interpreter.github.io/edit/master/docs/08-advanced/01-data-tables.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Report Portal",permalink:"/docs/reports/portal"},next:{title:"About the Logo",permalink:"/docs/about"}},c=[{value:"Horizontal data tables",id:"horizontal-data-tables",children:[{value:"With header",id:"with-header",children:[]},{value:"Without header",id:"without-header",children:[]}]},{value:"Vertical data tables",id:"vertical-data-tables",children:[{value:"With header",id:"with-header-1",children:[]},{value:"Without header",id:"without-header-1",children:[]}]},{value:"Matrix tables",id:"matrix-tables",children:[]},{value:"ForEach record",id:"foreach-record",children:[{value:"@ForEach annotation",id:"foreach-annotation",children:[]}]},{value:"Implicit attributes",id:"implicit-attributes",children:[]},{value:"Report output samples",id:"report-output-samples",children:[]}],u={toc:c};function p(e){var a=e.components,l=(0,d.Z)(e,i);return(0,r.kt)("wrapper",(0,t.Z)({},u,l,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"data-tables"},"Data Tables"),(0,r.kt)("p",null,"Steps containing ",(0,r.kt)("a",{parentName:"p",href:"https://cucumber.io/docs/gherkin/reference/#data-tables"},"data tables")," can be processed by ",(0,r.kt)("a",{parentName:"p",href:"/docs/meta-specs#stepdefs"},"StepDefs")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"@DataTable")," annotation."),(0,r.kt)("h2",{id:"horizontal-data-tables"},"Horizontal data tables"),(0,r.kt)("h3",{id:"with-header"},"With header"),(0,r.kt)("p",null,"This example has 3 rows and 3 columns of data and a top header. The first horizontal row is the header and the rows that follow are data records."),(0,r.kt)("h4",{id:"in-feature"},"In feature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"  Scenario: Horizontal table with header\n      Given each row contains a number and its square and cube\n            | number | square | cube |\n            | 1      | 1      | 1    |\n            | 2      | 4      | 8    |\n            | 3      | 9      | 27   |\n")),(0,r.kt)("h4",{id:"in-meta"},"In meta"),(0,r.kt)("p",null,"Here we specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"@DataTable")," annotation on the StepDef with the ",(0,r.kt)("inlineCode",{parentName:"p"},"header")," attribute set to ",(0,r.kt)("inlineCode",{parentName:"p"},"top")," to assign the names in the top header record to the elements in each data record. We then reference the data using ",(0,r.kt)("inlineCode",{parentName:"p"},"data[recordNo][name]")," to access any explicit record (where ",(0,r.kt)("inlineCode",{parentName:"p"},"recordNo")," of 1st record is 1, 2nd is 2, and so on), or ",(0,r.kt)("inlineCode",{parentName:"p"},"data[name]")," to access the current record in a 'for each' step."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2}","{2}":!0},'  @StepDef\n  @DataTable(header="top")\n  Scenario: each row contains a number and its square and cube\n      Given name[1] should be "number"\n        And name[2] should be "square"\n        And name[3] should be "cube"\n        And data[1][number] should be "1"\n        And data[2][number] should be "2"\n        And data[3][number] should be "3"\n        And data[1][square] should be "1"\n        And data[2][square] should be "4"\n        And data[3][square] should be "9"\n        And data[1][cube] should be "1"\n        And data[2][cube] should be "8"\n        And data[3][cube] should be "27"\n        And number ^ 2 = square of number for each data record\n        And number ^ 3 = cube of number for each data record\n\n  @StepDef\n  Scenario: number ^ <power> = <function> of number\n      Given the result is defined by javascript "Math.pow(${data[number]}, $<power>)"\n       Then the result should be "${data[$<function>]}.0"\n')),(0,r.kt)("h3",{id:"without-header"},"Without header"),(0,r.kt)("p",null,"This example has 3 rows and 2 columns of data and no header. Each horizontal row is a data record."),(0,r.kt)("h4",{id:"in-feature-1"},"In feature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"  Scenario: Horizontal data table with no header\n      Given each row contains a number in decimal and binary form\n            | 1 | 1  |\n            | 2 | 10 |\n            | 3 | 11 |\n")),(0,r.kt)("h4",{id:"in-meta-1"},"In meta"),(0,r.kt)("p",null,"Here we specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"@DataTable")," annotation on the StepDef with the ",(0,r.kt)("inlineCode",{parentName:"p"},"horizontal")," attribute set to ",(0,r.kt)("inlineCode",{parentName:"p"},"decimal,binary")," to assign names to the elements in each data record. We then reference the data using ",(0,r.kt)("inlineCode",{parentName:"p"},"data[recordNo][name]")," to access any explicit record (where ",(0,r.kt)("inlineCode",{parentName:"p"},"recordNo")," of 1st record is 1, 2nd is 2, and so on), or ",(0,r.kt)("inlineCode",{parentName:"p"},"data[name]")," to access the current record in a 'for each' step. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2}","{2}":!0},'  @StepDef\n  @DataTable(horizontal="decimal,binary")\n  Scenario: each row contains a number in decimal and binary form\n      Given name[1] should be "decimal"\n        And name[2] should be "binary"\n        And data[1][decimal] should be "1"\n        And data[2][decimal] should be "2"\n        And data[3][decimal] should be "3"\n        And data[1][binary] should be "1"\n        And data[2][binary] should be "10"\n        And data[3][binary] should be "11"\n        And the decimal data[decimal] should be data[binary] in binary for each data record\n\n  @StepDef\n  Scenario: the decimal <decimal> should be <binary> in binary\n     Given the result is defined by javascript "Number(${$<decimal>}).toString(2)"\n      Then the result should be "${$<binary>}"\n')),(0,r.kt)("h2",{id:"vertical-data-tables"},"Vertical data tables"),(0,r.kt)("h3",{id:"with-header-1"},"With header"),(0,r.kt)("p",null,"This example has 3 rows and 3 columns of data and a left header. The first vertical column is the header and the columns that follow are data records."),(0,r.kt)("h4",{id:"in-feature-2"},"In feature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"  Scenario: Vertical table with header\n      Given each column contains a number and its square and cube\n            | number | 1 | 2 | 3  |\n            | square | 1 | 4 | 9  |\n            | cube   | 1 | 8 | 27 |\n")),(0,r.kt)("h4",{id:"in-meta-2"},"In meta"),(0,r.kt)("p",null,"Here we specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"@DataTable")," annotation on the StepDef with the ",(0,r.kt)("inlineCode",{parentName:"p"},"header")," attribute set to ",(0,r.kt)("inlineCode",{parentName:"p"},"left")," to assign the names in the left header record to the elements in each data record. We then reference the data using ",(0,r.kt)("inlineCode",{parentName:"p"},"data[recordNo][name]")," to access any explicit record (where ",(0,r.kt)("inlineCode",{parentName:"p"},"recordNo")," of 1st record is 1, 2nd is 2, and so on), or ",(0,r.kt)("inlineCode",{parentName:"p"},"data[name]")," to access the current record in a 'for each' step."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2}","{2}":!0},'  @StepDef\n  @DataTable(header="left")\n  Scenario: each column contains a number and its square and cube\n      Given name[1] should be "number"\n        And name[2] should be "square"\n        And name[3] should be "cube"\n        And data[1][number] should be "1"\n        And data[2][number] should be "2"\n        And data[3][number] should be "3"\n        And data[1][square] should be "1"\n        And data[2][square] should be "4"\n        And data[3][square] should be "9"\n        And data[1][cube] should be "1"\n        And data[2][cube] should be "8"\n        And data[3][cube] should be "27"\n        And number ^ 2 = square of number for each data record\n        And number ^ 3 = cube of number for each data record\n  @StepDef\n  Scenario: number ^ <power> = <function> of number\n      Given the result is defined by javascript "Math.pow(${data[number]}, $<power>)"\n       Then the result should be "${data[$<function>]}.0"\n')),(0,r.kt)("h3",{id:"without-header-1"},"Without header"),(0,r.kt)("p",null,"This example has 2 rows and 3 columns of data and no header. Each vertical row is a data record."),(0,r.kt)("h4",{id:"in-feature-3"},"In feature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"  Scenario: Vertical data table with no header\n      Given each column contains a number in decimal and binary form\n            | 4   | 5    | 6   |\n            | 100 | 101  | 110 |\n")),(0,r.kt)("h4",{id:"in-meta-3"},"In meta"),(0,r.kt)("p",null,"Here we specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"@DataTable")," annotation on the StepDef with the ",(0,r.kt)("inlineCode",{parentName:"p"},"vertical")," attribute set to ",(0,r.kt)("inlineCode",{parentName:"p"},"decimal,binary")," to assign names to the elements in each data record. We then reference the data using ",(0,r.kt)("inlineCode",{parentName:"p"},"data[recordNo][name]")," to access any explicit record (where ",(0,r.kt)("inlineCode",{parentName:"p"},"recordNo")," of 1st record is 1, 2nd is 2, and so on), or ",(0,r.kt)("inlineCode",{parentName:"p"},"data[name]")," to access the current record in a 'for each' step)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2}","{2}":!0},'  @StepDef\n  @DataTable(vertical="decimal,binary")\n  Scenario: each column contains a number in decimal and binary form\n      Given name[1] should be "decimal"\n        And name[2] should be "binary"\n        And data[1][decimal] should be "4"\n        And data[2][decimal] should be "5"\n        And data[3][decimal] should be "6"\n        And data[1][binary] should be "100"\n        And data[2][binary] should be "101"\n        And data[3][binary] should be "110"\n        And the decimal data[decimal] should be data[binary] in binary for each data record\n\n  @StepDef\n  Scenario: the decimal <decimal> should be <binary> in binary\n     Given the result is defined by javascript "Number(${$<decimal>}).toString(2)"\n      Then the result should be "${$<binary>}"\n')),(0,r.kt)("h2",{id:"matrix-tables"},"Matrix tables"),(0,r.kt)("p",null,"A matrix has a top and left headers around contained data. That data can only be accessed by top-left coordinates and so there is no concept of records in a matrix."),(0,r.kt)("p",null,"This example has 3 rows and 3 columns of data and top and left headers. The first row (excluding the first element is the top header and the first column (excluding the first element) is the left header. The data exists below and to the right of these headers respectively."),(0,r.kt)("h4",{id:"in-feature-4"},"In feature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"  Scenario: Matrix table with top and left headers\n      Given the top and left numbers yield the product in the matrix\n            | x | 1 | 2 | 3 |\n            | 1 | 1 | 2 | 3 |\n            | 2 | 2 | 4 | 6 |\n            | 3 | 3 | 6 | 9 |\n")),(0,r.kt)("h4",{id:"in-meta-4"},"In meta"),(0,r.kt)("p",null,"Here we specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"@DataTable")," annotation on the StepDef with the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," attribute set to ",(0,r.kt)("inlineCode",{parentName:"p"},"matrix")," to assign top-left header coordinates to the data elements in the matrix. We can then reference the names in the top and left headers using ",(0,r.kt)("inlineCode",{parentName:"p"},"top.name[columnNo]")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"left.name[rowNo]")," respectively (where both ",(0,r.kt)("inlineCode",{parentName:"p"},"columnNo")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"rowNo")," are 1 for the 1st header element, 2 for 2nd and so on). The name of the header element at top-left corner can be accessed as ",(0,r.kt)("inlineCode",{parentName:"p"},"vertex.name"),". The data can be accessed using ",(0,r.kt)("inlineCode",{parentName:"p"},"data[top-name][left-name]")," (where ",(0,r.kt)("inlineCode",{parentName:"p"},"top-name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"left-name")," are the top and left header names of the row and column where the data resides - they just happen to also be numbers in this example). "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2}","{2}":!0},'  @StepDef\n  @DataTable(type="matrix")\n  Scenario: the top and left numbers yield the product in the matrix\n      Given vertex.name should be "x"\n        And top.name[1] should be "1"\n        And top.name[2] should be "2"\n        And top.name[3] should be "3"\n        And left.name[1] should be "1"\n        And left.name[2] should be "2"\n        And left.name[3] should be "3"\n        And data[1][1] should be "1"\n        And data[1][2] should be "2"\n        And data[1][3] should be "3"\n        And data[2][1] should be "2"\n        And data[2][2] should be "4"\n        And data[2][3] should be "6"\n        And data[3][1] should be "3"\n        And data[3][2] should be "6"\n        And data[3][3] should be "9"\n        And top.name[1] x left.name[1] = data[1][1]\n        And top.name[2] x left.name[1] = data[2][1]\n        And top.name[3] x left.name[1] = data[3][1]\n        And top.name[1] x left.name[2] = data[1][2]\n        And top.name[2] x left.name[2] = data[2][2]\n        And top.name[3] x left.name[2] = data[3][2]\n        And top.name[1] x left.name[3] = data[1][3]\n        And top.name[2] x left.name[3] = data[2][3]\n        And top.name[3] x left.name[3] = data[3][3]\n\n  @StepDef\n  Scenario: <a> x <b> = <c>\n      Given the product is defined by javascript "${$<a>} * ${$<b>}"\n       Then the product should be "${$<c>}"\n')),(0,r.kt)("h2",{id:"foreach-record"},"ForEach record"),(0,r.kt)("p",null,"Consider the following step that accepts a data table:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"  When the following items are added\n       | Get the milk  |\n       | Walk the dog  |\n")),(0,r.kt)("p",null,"To loop over each record in earlier versions of Gwen, the following two StepDefs would need to be defined:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},'  @StepDef\n  @DataTable(horizontal="item")\n  Scenario: the following items are added\n       When I add a todo item for each data record\n                                               \n  @StepDef\n  Scenario: I add a todo item\n      Given the todo field can be located by class "new-todo"\n        And the displayed count can be located by css ".todo-count strong"\n       When I enter data[item] in the todo field\n       Then the displayed count should be "${record.number}"\n')),(0,r.kt)("h3",{id:"foreach-annotation"},"@ForEach annotation"),(0,r.kt)("p",null,"As of ",(0,r.kt)(o.Z,{to:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v2.47.0",mdxType:"Link"},"v2.47.0"),", a ",(0,r.kt)("inlineCode",{parentName:"p"},"@ForEach")," annotation can be used to simplify and reduce the above to a single StepDef:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin",metastring:"{2}","{2}":!0},'  @StepDef\n  @ForEach\n  @DataTable(horizontal="item")\n  Scenario: the following items are added\n      Given the todo field can be located by class "new-todo"\n        And the displayed count can be located by css ".todo-count strong"\n       When I enter data[item] in the todo field\n       Then the displayed count should be "${record.number}"\n')),(0,r.kt)("h2",{id:"implicit-attributes"},"Implicit attributes"),(0,r.kt)("p",null,"The following attributes are implicitly available to data records processed in ",(0,r.kt)("a",{parentName:"p",href:"/docs/dsl/reference#step-for-each-data-record"},"for each")," steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"record.number")," = The record number starting at 1"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"record.index")," = The record index starting at 0 (since ",(0,r.kt)(o.Z,{to:"https://github.com/gwen-interpreter/gwen-web/releases/tag/v2.30.1",mdxType:"Link"},"v2.30.1"),")")),(0,r.kt)("h2",{id:"report-output-samples"},"Report output samples"),(0,r.kt)("p",null,"Data tables will be displayed in ",(0,r.kt)("a",{parentName:"p",href:"/docs/reports/html"},"HTML reports")," as follows:"),(0,r.kt)("h4",{id:"compact"},"Compact"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Compact table report",src:n(8736).Z})),(0,r.kt)("h4",{id:"expanded"},"Expanded"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Expanded table report",src:n(5427).Z})))}p.isMDXComponent=!0},8736:function(e,a,n){a.Z=n.p+"assets/images/data-tables-report-compact-b770290fcdde45e597e6bad96e46d5f6.png"},5427:function(e,a,n){a.Z=n.p+"assets/images/data-tables-report-expanded-b5905a228308ca70a7743d29e81a66a0.png"}}]);