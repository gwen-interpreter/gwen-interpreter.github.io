---
title: JS bindings
---

import Link from '@docusaurus/Link';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


<details id="name-is-defined-by-javascript-expression">
  <summary class="dsl">

  ```gherkin
  <name> is defined by <javascript|js> "<script>"
  ```
  <p>Associates a name with the return value of a JavaScript expression or function.</p>
  </summary>
  <p>Where</p>
  <ul>
    <li><code>&lt;name&gt;</code> is the name to associate</li>
    <li><code>&lt;javascript|js&gt;</code> is <code>javascript</code> (or <code>js</code> since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v2.46.0">v2.46.0</Link>)</li>
    <li>
      <code>&lt;script&gt;</code> is the javascript expression or function that will return the value (can be in <Link to="/docs/doc-strings">DocString</Link> position)
      <ul>
        <ul>
          <li>For a one liner expression, no function, arrow declaration or <code>return</code> prefix is required</li>
          <li>
            For a function, use either:
            <ul>
              <li><Link to="/docs/js-functions">Arrow syntax</Link> (preferred): <code>(arg1, arg2, ..argN) =&gt; &#123; body &#125;</code> (Since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v3.56.0">v3.56.0</Link>)</li>
              <li>Or anonymous function syntax (legacy): <code>(function(arg1, arg2, ..argN)&#123; body &#125;)(arguments[0], arguments[1], ..arguments[N])</code></li>
            </ul>
          </li>
        </ul>
      </ul>
    </li>
  </ul>
  <p>
    Optionally accepts the <Link href="/docs/eager-or-lazy"><code>@Eager</code>, <code>@Lazy</code></Link> or <code>@Masked</code> annotations.
    <ul>
      <li><code>@Eager</code> immediately evaluates the <code>&lt;expression&gt;</code> and binds the result to <code>&lt;name&gt;</code></li>
      <li><code>@Lazy</code> evaluates the <code>&lt;expression&gt;</code> and binds the result to <code>&lt;name&gt;</code> when it is first referenced</li>
      <li>In the absence of either of the above annotations, <code>&lt;expression&gt;</code> is evaluated every time <code>&lt;name&gt;</code> is referenced</li>
      <li><code>@Masked</code> masks the captured value to prevent it from being logged as clear text</li>
    </ul>
  </p>
  <p>Examples</p>

  ```gherkin {1}
    Given iso date is defined by js "new Date().toISOString().substring(0, 10)"
     Then iso date should match regex "^\d{4}-([0]\d|1[0-2])-([0-2]\d|3[01])$"
  ```

  <div class="grid-3">
    <div><Link to="#name-is-defined-by-javascript-expression">Link</Link></div>
    <div align="center"></div>
    <div align="right">Since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v1.0.0">v1.0.0</Link></div>
  </div>
</details>

<details id="name-is-defined-by-js-function-applied-to-arg">
  <summary class="dsl">

  ```gherkin
  <name> is defined by <javascriptRef> applied to "<argument>"
  ```
  <p>Applies a JavaScript function to an argument and binds the result to <code>&lt;name&gt;</code> in the global scope.</p>
  </summary>
  <p>Where</p>
  <ul>
    <li><code>&lt;name&gt;</code> is the name to bind the function result to</li>
    <li><code>&lt;javascriptRef&gt;</code> is the name of the binding containing the javascript function to apply</li>
    <li><code>&lt;argument&gt;</code> argument to apply the function</li>
  </ul>
  <p>
    Optionally accepts the <Link href="/docs/eager-or-lazy"><code>@Eager</code>, <code>@Lazy</code></Link> or <code>@Masked</code> annotations.
    <ul>
      <li><code>@Eager</code> immediately evaluates the <code>&lt;expression&gt;</code> and binds the result to <code>&lt;name&gt;</code></li>
      <li><code>@Lazy</code> evaluates the <code>&lt;expression&gt;</code> and binds the result to <code>&lt;name&gt;</code> when it is first referenced</li>
      <li>In the absence of either of the above annotations, <code>&lt;expression&gt;</code> is evaluated every time <code>&lt;name&gt;</code> is referenced</li>
      <li><code>@Masked</code> masks the captured value to prevent it from being logged as clear text</li>
    </ul>
  </p>
  <p>Examples</p>

  ```gherkin {9}
    Given iso date is defined by js "new Date().toISOString().substring(0, 10)"
      And toDMY is defined by js
          """
          (ymd) => {
            var parts = ymd.split('-');
            return parts[2] + '/' + parts[1] + '/' + parts[0];
          }
          """
      And dmy date is defined by toDMY applied to "${iso date}"
     Then dmy date should match regex "^([0-2]\d|3[01])/([0]\d|1[0-2])/\d{4}$"
  ```

  ```gherkin {9}
    Given toMDY is defined by js
          """
          (ymd) => {
            var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var parts = ymd.split('-');
            return months[parseInt(parts[1]) - 1] + ' ' + parts[2] + ' ' + parts[0];
          }
          """
      And dmy date is defined by toMDY applied to "2022-04-05"
     Then dmy date should be "Apr 05 2022"
  ```

  <div class="grid-3">
    <div><Link to="#name-is-defined-by-js-function-applied-to-arg">Link</Link></div>
    <div align="center"></div>
    <div align="right">Since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v3.10.1">v3.10.1</Link></div>
  </div>
</details>

<details id="name-is-defined-by-js-function-applied-to-args-delimited-by">
  <summary class="dsl">

  ```gherkin
  <name> is defined by <javascriptRef> applied to "<arguments>" delimited by "<delimiter>"
  ```
  <p>Applies a JavaScript function to mutiple arguments using a customer delimiter and binds the result to <code>&lt;name&gt;</code> in the global scope.</p>
  </summary>
  <p>Where</p>
  <ul>
    <li><code>&lt;name&gt;</code> is the name to bind the function result to</li>
    <li><code>&lt;javascriptRef&gt;</code> is the name of the binding containing the javascript function to apply</li>
    <li><code>&lt;arguments&gt;</code> a delimited list of arguments to apply the function to</li>
    <li>
      <code>&lt;delimiter&gt;</code> is the delmiter used in <code>&lt;arguments&gt;</code>
      <ul>
        <li>The 1st agrument is referenced in the JavaScript as <code>arguments[0]</code>, the 2nd argument as <code>arguments[1]</code>, the 3rd as <code>arguments[2]</code> and so on.</li>
      </ul>
    </li>
  </ul>
  <p>
    Optionally accepts the <Link href="/docs/eager-or-lazy"><code>@Eager</code>, <code>@Lazy</code></Link> or <code>@Masked</code> annotations.
    <ul>
      <li><code>@Eager</code> immediately evaluates the <code>&lt;expression&gt;</code> and binds the result to <code>&lt;name&gt;</code></li>
      <li><code>@Lazy</code> evaluates the <code>&lt;expression&gt;</code> and binds the result to <code>&lt;name&gt;</code> when it is first referenced</li>
      <li>In the absence of either of the above annotations, <code>&lt;expression&gt;</code> is evaluated every time <code>&lt;name&gt;</code> is referenced</li>
      <li><code>@Masked</code> masks the captured value to prevent it from being logged as clear text</li>
    </ul>
  </p>
  <p>Examples</p>

  ```gherkin {3}
    Given iso date is defined by js "new Date().toISOString().substring(0, 10)"
      And toDMY is defined by js "(y,m,d) => d + '/' + m + '/' + y"
      And dmy date is defined by toDMY applied to "${iso date}" delimited by "-"
     Then dmy date should match regex "^([0-2]\d|3[01])/([0]\d|1[0-2])/\d{4}$"
  ```
  
  ```gherkin {10}
    Given toISO is defined by js
          """
          (m,d,y) => {
            var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var mNo = months.indexOf(m) + 1;
            if (mNo < 10) mNo = '0' + mNo;
            return y + '-' + mNo + '-' + d;
          }
          """
      And iso date is defined by toISO applied to "Apr 05 2022" delimited by " "
     Then iso date should be "2022-04-05"
  ```

  <div class="grid-3">
    <div><Link to="#name-is-defined-by-js-function-applied-to-args-delimited-by">Link</Link></div>
    <div align="center"></div>
    <div align="right">Since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v3.10.0">v3.10.0</Link></div>
  </div>
</details>

<details id="name-is-defined-by-js-function-applied-to-element">
  <summary class="dsl">

  ```gherkin
  <name> is defined by <javascriptRef> applied to <element>
  ```
  <p>Applies a JavaScript function to an element and binds the result to <code>&lt;name&gt;</code> in the global scope.</p>
  </summary>
  <p>Where</p>
  <ul>
    <li><code>&lt;name&gt;</code> is the name to bind the function result to</li>
    <li><code>&lt;javascriptRef&gt;</code> is the name of the binding containing the javascript single argument function to apply</li>
    <li><code>&lt;element&gt;</code> is the name of the web element to apply the function to</li>
  </ul>
  <p>
    Optionally accepts the <Link href="/docs/eager-or-lazy"><code>@Eager</code>, <code>@Lazy</code></Link> or <code>@Masked</code> annotations.
    <ul>
      <li><code>@Eager</code> immediately applies the function to the element and binds the result to <code>&lt;name&gt;</code></li>
      <li><code>@Lazy</code> applies the function to the element and binds the result to <code>&lt;name&gt;</code> when it is first referenced</li>
      <li>In the absence of either of the above annotations, the function is applied to the element every time <code>&lt;name&gt;</code> is referenced</li>
      <li><code>@Masked</code> masks the captured value to prevent it from being logged as clear text</li>
    </ul>
  </p>
  <p>Examples</p>

  ```gherkin {3}
    Given getHref is defined by js "(elem) => elem.getAttribute('href')"
      And the todo link can be located by xpath "//a[contains(text(),'TodoMVC')]"
      And href is defined by getHref applied to the todo link
     When I navigate to "https://todomvc.com/examples/react/dist/"
     Then href should be "http://todomvc.com"
  ```
  
  ```gherkin {9}
    Given getHref is defined by js 
      """
      (elem) => { 
        return elem.getAttribute('href')
      }
      """
      And the todo link can be located by xpath "//a[contains(text(),'TodoMVC')]"
     When I navigate to "https://todomvc.com/examples/react/dist/"
      And @Eager href is defined by getHref applied to the todo link
     Then href should be "http://todomvc.com"
  ```

  <div class="grid-3">
    <div><Link to="#name-is-defined-by-js-function-applied-to-element">Link</Link></div>
    <div align="center"></div>
    <div align="right">Since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v4.6.0">v4.6.0</Link></div>
  </div>
</details>
