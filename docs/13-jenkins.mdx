--- 
title: Jenkins
toc_min_heading_level: 2
toc_max_heading_level: 3
---

import Link from '@docusaurus/Link';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';

# Running Gwen in Jenkins

## Jenkins job

To run your Gwen project in Jenkins:

1. Get your Gwen project [running in Docker](/docs/docker) first.

2. If you initialised your Gwen project directory using the [`gwen init`](/docs/cli#init-command) command with Gwen v3.16.0 or higher, you will already have a `Jenkinsfile` ready and can skip straight Step 4. Otherwise you will need to create the Jenkins file in the `gwen` directory of your project as shown here.

```shell {4}
./project                    # Your project root
 └── /gwen
     └──Jenkinsfile          # Jenkins pipeline script file
```

3. Save the following content into your *Jenkinsfile*.

```groovy
pipeline {
  agent {
      // an agent with docker installed
      label 'docker-agent'
  }
  parameters { 
    choice(name: 'browser', choices: ['chrome', 'firefox', 'edge'], description: 'Target web browser')
    booleanParam(name: 'dry_run', defaultValue: false, description: 'Validate without executing')
    booleanParam(name: 'parallel', defaultValue: false, description: 'Enable parallel execution') 
    booleanParam(name: 'headless', defaultValue: false, description: 'Enable headless browser') 
  }
  environment {
    GWEN_BROWSER = "${params.browser}"
    GWEN_DRY_RUN = "${params.dry_run}"
    GWEN_PARALLEL = "${params.parallel}"
    GWEN_HEADLESS = "${params.headless}"
  }
  stages {
    stage("Prepare") {
      steps {
        script {
          // Create output dir to avoid potential permission issues in docker
          sh 'mkdir -p gwen/output'
        }
      }
    }
    stage("Gwen") {
      steps {
        script {
          // Spin up environment and execute Gwen in docker
          sh "docker-compose -f gwen/docker-compose.yml run gwen"
        }
      }
      post {
        always {
          sh "docker-compose -f gwen/docker-compose.yml down"
          archiveArtifacts artifacts: 'gwen/output/reports/**'
          publishHTML(target: [
                  allowMissing         : false,
                  alwaysLinkToLastBuild: false,
                  keepAll              : true,
                  reportDir            : "gwen/output/reports/html",
                  reportFiles          : 'index.html',
                  reportName           : "Gwen-Report"
          ])
        }
      }
    }
  }
}
```

4. Push or commit your project to a Git repostitory

5. Create a new [pipeline job](https://www.jenkins.io/doc/book/pipeline/getting-started/) in Jenkins and perform the following in the Pipeline configuration section:
    - Checkout your Gwen project from Git
    - Specify the `gwen/Jenkinsfile` above as the script
    - Save the job

6. Schedule or manually trigger your Jenkins job
    - Evaluation reports will be generated and published on each run (Gwen-Report links)
