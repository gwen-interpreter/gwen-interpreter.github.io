--- 
title: Jenkins
toc_min_heading_level: 2
toc_max_heading_level: 3
---

import Link from '@docusaurus/Link';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';

# Running Gwen in Jenkins

The easiest way to get Gwen running in [Jenkins](https://www.jenkins.io/) is to push your project to a Git repository and [get it running in Docker](/docs/docker). Then it's just a matter of calling `docker-compose run gwen` in your Jenkins job or pipeline.  Everything including a [Selenoid](https://aerokube.com/selenoid/) browser environment and Gwen itself will spin up and run.

## Jenkins job

To run your Gwen project in Jenkins:

1. Configure your Gwen project to [run in Docker](/docs/docker).
2. Create a `Jenkinsfile` file in the root of your Gwen project.

```shell {4}
/project                    # Your project root
└── Jenkinsfile             # Jenkins pipeline script file
```

3. Save the following content into your *Jenkinsfile*.

```groovy
pipeline {
  agent {
      // an agent with docker installed
      label 'docker-agent'
  }
  parameters { 
    choice(name: 'browser', choices: ['chrome', 'firefox', 'edge'], description: 'Target web browser')
    booleanParam(name: 'dry_run', defaultValue: false, description: 'Validate without executing')
    booleanParam(name: 'parallel', defaultValue: false, description: 'Enable parallel execution') 
    booleanParam(name: 'headless', defaultValue: false, description: 'Enable headless browser') 
  }
  environment {
    GWEN_BROWSER = "${params.browser}"
    GWEN_DRY_RUN = "${params.dry_run}"
    GWEN_PARALLEL = "${params.parallel}"
    GWEN_HEADLESS = "${params.headless}"
  }
  stages {
    stage("Prepare") {
      steps {
        script {
          // Create output dir to avoid potential permission issues in docker
          sh 'mkdir -p gwen/output'
        }
      }
    }
    stage("Gwen") {
      steps {
        script {
          // Spin up environment and execute Gwen in docker
          sh "docker-compose run gwen"
        }
      }
      post {
        always {
          sh "docker-compose down"
          archiveArtifacts artifacts: 'gwen/output/reports/**'
          publishHTML(target: [
                  allowMissing         : false,
                  alwaysLinkToLastBuild: false,
                  keepAll              : true,
                  reportDir            : "gwen/output/reports/html",
                  reportFiles          : 'index.html',
                  reportName           : "Gwen-Report"
          ])
        }
      }
    }
  }
}
```

4. Push or commit your project to a Git repostitory

5. Create a new [pipeline job](https://www.jenkins.io/doc/book/pipeline/getting-started/) in Jenkins and perform the following in the Pipeline configuration section:
    - Checkout your Gwen project from Git
    - Specify the `Jenkinsfile` above as the script
    - Save the job

6. Schedule or manually trigger your Jenkins job
    - Evaluation reports will be generated and published on each run (Gwen-Report links)
