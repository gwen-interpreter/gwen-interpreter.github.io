--- 
title: Jenkins
toc_min_heading_level: 2
toc_max_heading_level: 3
---

import Link from '@docusaurus/Link';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';

# Running Gwen on Jenkins

## Jenkins job

To run your Gwen project in Jenkins, get your Gwen project [running in Docker](/docs/docker) first. Then create a Jenkins pipeline file in your project using the [`init --jenkins`](/docs/cli#init-command) command as shown below. This command is available since Gwen v3.16.0. You will need to create the `Jenkinsfile` manually if you are using an older version.

<Tabs
  groupId="setup"
  defaultValue="project"
  values={[
    {label: 'Project', value: 'project'},
  ]}>

  <TabItem value="project">

  <Tabs
  groupId="jstool"
  defaultValue="yarn"
  values={[
    {label: 'Yarn', value: 'yarn'},
    {label: 'npm', value: 'npm'},
    {label: 'pnpm', value: 'pnpm'}
  ]}>

  <TabItem value="yarn">

  Run the following command in the root of your project to generate a Jenkins pipeline file
  
  ```shell
  yarn gwen init --jenkins
  ```

  </TabItem>

  <TabItem value="npm">

  Run the following command in the root of your project to generate a Jenkins pipeline file
  
  ```shell
  npm run gwen init --jenkins
  ```
      
  </TabItem>

  <TabItem value="pnpm">

  Run the following command in the root of your project to generate a Jenkins pipeline file
  
  ```shell
  pnpm gwen init --jenkins
  ```
  
  </TabItem>

  </Tabs>

  </TabItem>  

  </Tabs>

The following file will be created

```shell {3}
./project                    # Your project root
└── /gwen
    └──Jenkinsfile          # Jenkins pipeline script file
```

With the following content

```groovy
pipeline {
  agent {
      // replace with an agent that has docker installed
      label 'docker-agent'
  }
  parameters { 
    choice(name: 'browser', choices: ['chrome', 'firefox', 'edge'], description: 'Target web browser')
    booleanParam(name: 'dry_run', defaultValue: false, description: 'Validate without executing')
    booleanParam(name: 'parallel', defaultValue: false, description: 'Enable parallel execution') 
    booleanParam(name: 'headless', defaultValue: false, description: 'Enable headless browser') 
  }
  environment {
    GWEN_BROWSER = "${params.browser}"
    GWEN_DRY_RUN = "${params.dry_run}"
    GWEN_PARALLEL = "${params.parallel}"
    GWEN_HEADLESS = "${params.headless}"
  }
  stages {
    stage("Prepare") {
      steps {
        script {
          // Create output dir to avoid potential permission issues in docker
          sh 'mkdir -p gwen/output'
        }
      }
    }
    stage("Gwen") {
      steps {
        script {
          // Spin up environment and execute Gwen in docker
          sh "docker-compose -f gwen/docker-compose.yml run gwen"
        }
      }
      post {
        always {
          sh "docker-compose -f gwen/docker-compose.yml down"
          archiveArtifacts artifacts: 'gwen/output/reports/**'
          publishHTML(target: [
                      allowMissing          : false,
                      alwaysLinkToLastBuild : true,
                      keepAll               : true,
                      reportDir             : "gwen/output/reports/html",
                      reportFiles           : 'index.html',
                      reportName            : "Gwen-Report"
          ])
        }
      }
    }
  }
}
```

Push or commit your project to a Git repostitory
  - Checkout your Gwen project from Git
  - Specify the `gwen/Jenkinsfile` above as the script
  - Save the job

Schedule or manually trigger your Jenkins job
  - Evaluation reports will be generated and published on each run (Gwen-Report links)
