--- 
toc_min_heading_level: 2
toc_max_heading_level: 3
---

import Link from '@docusaurus/Link';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';

# Gwen 4

## What's New

### Processes

You can now configure one or many launch configurations to control how different processes will be executed.

#### New CLI option for launching a process

Use the new `-v|--verbose` CLI option for verbose logging instead (equivalent to Gwen 2 logging).

## What's dropped

- Report Portal integration
- Standalone setup option no longer supported (only projects supported)

## Migration Guide

This guide will help you to migrate an existing Gwen 3 project over to Gwen 4. If you want to start a new project from scratch, go straight to the [getting started](/docs/get-started) guide instead.

### 1. Settings

The following settings changes have been made to Gwen 3. Scan all your *.properties* files and update accordingly.

#### New names

The following settings have been renamed.

| Renamed                        | To this                                                                                            |
| :----------------------------- | :------------------------------------------------------------------------------------------------------ |
| `gwen.feature.failfast`        | [`gwen.feature.failfast.enabled`](/docs/settings#gwen-feature-failfast-enabled)               |
| `gwen.web.capture.screenshots` | [`gwen.web.capture.screenshots.enabled`](/docs/settings#gwen-web-capture-screenshots-enabled) |
| `gwen.web.browser`             | [`gwen.target.browser`](/docs/settings#gwen-target-browser)                                   |

#### Implicit values

| Rename this                           | To this                                                                                                            |
| :------------------------------------ | :----------------------------------------------------------------------------------------------------------------- |
| `gwen.eval.status.keyword`            | [`gwen.feature.eval.status.keyword`](/docs/implicit-values#gwen-feature-eval-status-keyword)                       |
| `gwen.eval.status.keyword.upperCased` | [`gwen.feature.eval.status.keyword.upperCased`](/docs/implicit-values#gwen-feature-eval-status-keyword-upperCased) |
| `gwen.eval.status.keyword.lowerCased` | [`gwen.feature.eval.status.keyword.lowerCased`](/docs/implicit-values#gwen-feature-eval-status-keyword-lowerCased) |
| `gwen.eval.status.keyword.isPassed`   | [`gwen.feature.eval.status.keyword.isPassed`](/docs/implicit-values#gwen-feature-eval-status-isPassed)             |
| `gwen.eval.status.keyword.isFailed`   | [`gwen.feature.eval.status.keyword.isFailed`](/docs/implicit-values#gwen-feature-eval-status-isFailed)             |
| `gwen.eval.status.message`            | [`gwen.feature.eval.status.message`](/docs/implicit-values#gwen-feature-eval-status-message)                       |
| `gwen.eval.status.message.escaped`    | [`gwen.feature.eval.status.message.escaped`](/docs/implicit-values#gwen-feature-eval-status-message-escaped)       |
| `gwen.eval.status.message.csvEscaped` | [`gwen.feature.eval.status.message.csvEscaped`](/docs/implicit-values#gwen-feature-eval-status-message-csvEscaped) |
| `gwen.eval.duration`                  | [`gwen.feature.eval.duration`](/docs/implicit-values#gwen-feature-eval-duration)                                   |
| `gwen.eval.duration.msecs`            | [`gwen.feature.eval.duration.msecs`](/docs/implicit-values#gwen-feature-eval-duration-msecs)                       |
| `gwen.eval.duration.secs`             | [`gwen.feature.eval.duration.secs`](/docs/implicit-values#gwen-feature-eval-duration-secs)                         |
| `data record number`                  | [`gwen.data.record.number`](/docs/implicit-values#gwen-data-record-number)                                         |
| `data.record.number`                  | [`gwen.data.record.number`](/docs/implicit-values#gwen-data-record-number)                                         |
| `data.record.index`                   | [`gwen.data.record.index`](/docs/implicit-values#gwen-data-record-index)                                           |
| `record.number`                       | [`gwen.table.record.number`](/docs/implicit-values#gwen-table-record-number)                                       |
| `record.index`                        | [`gwen.table.record.index`](/docs/implicit-values#gwen-table-record-index)                                         |
| `iteration.number`                    | [`gwen.iteration.number`](/docs/implicit-values#gwen-iteration-number)                                             |
| `iteration.index`                     | [`gwen.iteration.index`](/docs/implicit-values#gwen-iteration-index)                                               |


#### New defaults

The following settings have new defaults. If you want to continue using prior defaults for these, explicity set them in your current properties file.

| Setting                                                                                                           | Gwen 2 default | Gwen 3 default |
| :---------------------------------------------------------------------------------------------------------------- | :------------: | :------------: |
| [`gwen.associative.meta`](/docs/settings#gwen-associative-meta)                                         | `false`        | `true`         |
| [`gwen.behavior.rules`](/docs/settings#gwen-behavior-rules)                                             | `lenient`      | `strict`       |
| [`gwen.feature.mode`](/docs/settings#gwen-feature-mode)                                                 | `imperative`   | `declarative`  |
| [`gwen.report.suppress.meta`](/docs/settings#gwen-report-suppress-meta)                                 | `false`        | `true`         |
| [`gwen.auto.discover.data.csv`](/docs/settings#gwen-auto-discover-data-csv)                             | `true`         | `false`        |

#### New setttings impacting prior behaviour

The following new settings have configured defaults that change prior behaviour. If you want to revert to the prior behaviour, you will need to explicitly set these in your settings file accordingly.

| New Setting                                                                                                       | Since   | Prior default | New default |
| :---------------------------------------------------------------------------------------------------------------- | :-----: | :-----------: | :---------: |
| [`gwen.auto.bind.tableData.outline.examples`](/docs/settings#gwen-auto-bind-tableData-outline-examples) | v3.15.0 | `false`       | `true`      |
| [`gwen.error.messages.inline.locators`](/docs/settings#gwen-error-messages-inline-locators)             | v3.31.0 | `true`        | `false`     |
| [`gwen.web.assertions.maxStrikes`](/docs/settings#gwen-web-assertions-maxStrikes)                       | v3.41.0 | `infinity`    | `3`         |
| [`gwen.web.assertions.maxStrikes`](/docs/settings#gwen-web-assertions-maxStrikes)                       | v3.42.9 | `infinity`    | `5`         |
| [`gwen.web.assertions.maxStrikes`](/docs/settings#gwen-web-assertions-maxStrikes)                       | v3.52.0 | `infinity`    | `auto`      |

#### New formats

Two new settings formats have been introduced:

- [HOCON](https://github.com/lightbend/config/blob/master/HOCON.md#hocon-human-optimized-config-object-notation) (Human-Optimized Config Object Notation)
  - The is now the recommended and default settings format
  - A superset of JSON
  - Maintained in `*.conf` files
- JSON
  - Pure JSON format
  - Maintained in `*.json` files

The legacy Java style properties format is still supported and you can continue using properties files if you wish.

- Properties
  - Flat `name = value` pairs
  - Maintained in `*.properties` files

#### Migrate your settings (optional)

##### Choose one of three options:

<Tabs
  groupId="settings"
  defaultValue="conf"
  values={[
    {label: 'Convert to .conf', value: 'conf'},
    {label: 'Convert to .json', value: 'json'},
    {label: 'Keep using .properties', value: 'properties'},
  ]}>
<TabItem value="conf">

Repeat the following to convert every *.properties* file you have:

- Create a new file in the same location and with the same name but with a `.conf` extension
- Convert each setting to its HOCON equivalent and save it to your new *.conf* file
  - See example below
- Discard your *.properties* file when done (or rename with the *.properties.bak* extension)

##### Example

Properties file: *gwen.properties*

  ```properties
  # RP client settings
  rp.endpoint = http://localhost:8080
  rp.uuid = 28b262e7-8a9d-4928-b2a3-649562d5c63d
  rp.project = default_personal
  rp.launch = Gwen

  # Gwen core settings
  gwen.behavior.rules = strict
  gwen.report.overwrite = false

  # Gwen RP settings
  gwen.rp.heartbeat.timeoutSecs = 5
  gwen.rp.send.failed.errorBlocks = leaf
  gwen.rp.send.failed.stepDefs = none
  gwen.rp.send.stepDefs = inlined
  gwen.rp.testCaseId.keys = auto

  # Chrome settings
  gwen.web.chrome.args.0 = --ignore-certificate-errors
  gwen.web.chrome.args.1 = --window-size=1920,1080

  # Gwen web settings
  gwen.web.sendKeys.clearFirst = false
  gwen.web.sendKeys.clickFirst = false
  gwen.web.wait.seconds = 9
  ```

Equivalent HOCON file: *gwen.conf*

  ```json
  // RP client settings
  rp {
    endpoint = "http://<host>:<port>"
    uuid = "28b262e7-8a9d-4928-b2a3-649562d5c63d"
    project = "default_personal"
    launch = "Gwen"
  }

  // Gwen settings
  gwen {

    // General settings
    behavior {
      rules = "strict"
    }
    report {
      overwrite = false
    }

    // Gwen RP settings
    rp {
      heartbeat {
        timeoutSecs = 5
      }
      send {
        failed {
          errorBlocks = "leaf"
          stepDefs = "none"
        }
        stepDefs = "inlined"
      }
      testCaseId {
        keys = "auto"
      }
    }

    // Gwen web settings
    web {

      // General web settings
      sendKeys {
        clearFirst = false
        clickFirst = false
      }
      wait {
        seconds = 9
      }

      // Chrome settings
      chrome {
        args = [
          "--ignore-certificate-errors"
          "--window-size=1920,1080"
        ]
      }
      
    }
  }
  ```

</TabItem>
<TabItem value="json">

Repeat the following to convert every *.properties* file you have:

- Create a new file in the same location and with the same name but with a `.json` extension
- Convert each setting to its JSON equivalent and save it to your new *.json* file
  - See example below
- Discard your *.properties* file when done (or rename with the *.properties.bak* extension)

##### Example

Properties file: *gwen.properties*

  ```properties
  # RP client settings
  rp.endpoint = http://localhost:8080
  rp.uuid = 28b262e7-8a9d-4928-b2a3-649562d5c63d
  rp.project = default_personal
  rp.launch = Gwen

  # Gwen core settings
  gwen.behavior.rules = strict
  gwen.report.overwrite = false

  # Gwen RP settings
  gwen.rp.heartbeat.timeoutSecs = 5
  gwen.rp.send.failed.errorBlocks = leaf
  gwen.rp.send.failed.stepDefs = none
  gwen.rp.send.stepDefs = inlined
  gwen.rp.testCaseId.keys = auto

  # Chrome settings
  gwen.web.chrome.args.0 = --ignore-certificate-errors
  gwen.web.chrome.args.1 = --window-size=1920,1080

  # Gwen web settings
  gwen.web.sendKeys.clearFirst = false
  gwen.web.sendKeys.clickFirst = false
  gwen.web.wait.seconds = 9
  ```

Equivalent JSON file: *gwen.json*

  ```json
  {
    "rp": {
      "endpoint": "http://<host>:<port>",
      "uuid": "28b262e7-8a9d-4928-b2a3-649562d5c63d",
      "project": "default_personal",
      "launch": "Gwen"
    },
    "gwen": {
      "behavior": {
        "rules": "strict"
      },
      "report": {
        "overwrite": false
      },
      "rp": {
        "heartbeat": {
          "timeoutSecs": 5
        },
        "send": {
          "failed": {
            "errorBlocks": "leaf",
            "stepDefs": "none"
          },
          "stepDefs": "inlined"
        },
        "testCaseId": {
          "keys": "auto"
        }
      },
      "web": {
        "sendKeys": {
          "clearFirst": false,
          "clickFirst": false
        },
        "wait": {
          "seconds": 9
        },
        "chrome": {
          "args": [
            "--ignore-certificate-errors",
            "--window-size=1920,1080"
          ]
        }
      }
    }
  }
  ```

</TabItem>
<TabItem value="properties">

Continue using your properties files as before.

</TabItem>
</Tabs>

### 3. CLI

#### New `-c|--conf` option

The `-p|--properties` CLI option has been deprecated and replaced with the [`-c|--conf`](/docs/cli#gwen-cli-options-conf) option which now accepts *.conf*, *.json*, and *.properties* files. The former will still work for *.properties* files until the next major release (and will be removed then). You should use the new launch option going forward.

#### Default `-r|--report` option

The output directory for all Gwen reports now has a default value configured in the new [`gwen.cli.options.report`](/docs/settings#gwen-cli-options-report) default CLI setting. So you no longer need to explicitly specify the [`-r|--report`](/docs/cli#gwen-cli-options-report) CLI option every time you launch Gwen and want reports to be generated. You can however continue to explicitly pass it through and override the default if you want to. Alternatively, change the default.

#### HTML reports by default

[HTML reports](/docs/reports/html) will now be generated by default when you launch Gwen since the report output directory now has a configured default. They will also be generated by default for dry runs when you specify the [`-n|--dry-run`](/docs/cli#gwen-cli-options-dry-run) switch.

If you don't want any reports generated, invoke Gwen with the [`-f|--format`](/docs/cli#gwen-cli-options-format) CLI option passing in `none`.

### 4. String interpolation

[Interpolation](/docs/string-interpolation#interpolation-by-substitution) by concatenation has been deprecated in favor of substitution. You should convert all usages of conatenation to their substitution equivalents. Concatenation has been dropped since <Link to="https://github.com/gwen-interpreter/gwen-web/releases/tag/v3.14.0">v3.14.0</Link>.

### 5. Logback

Gwen 4 uses [logback](https://logback.qos.ch/index.html). You can override the default logging configuration with your by specifing `-Dlogback.configurationFile=/path-to-logback-config-file` of the command line or setting `logback.configurationFile` in your settings.


