--- 
slug: /meta
toc_min_heading_level: 2
toc_max_heading_level: 3
---

import Link from '@docusaurus/Link';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';

# Gwen Meta

## Meta specs

Meta specs are [Gherkin](https://cucumber.io/docs/gherkin/reference/) specifications that describe how steps in features will execute and are the automation glue in Gwen. They define all the step definitions and bindings required for automation and attach to features at runtime.

## StepDefs

### Composable step definitions

Step definitions are defined as <code>@StepDef</code> annotated [Scenarios](https://cucumber.io/docs/gherkin/reference/#example) with names that map to steps in features and bodies that call out to [DSL steps](/docs/dsl/reference) to perform operations.

:::tip

Put all your step definitions in meta to keep your features clean and free of automation concerns.

:::

Consider the following feature step:

:::note Feature Step

*File: features/todo.feature*

```gherkin
  Given a new todo list
```

:::

A step definition for executing this step could be defined in meta as follows:

:::note StepDef

*File: features/todo.meta*

```gherkin {2-3}
  @Context
  @StepDef
  Scenario: a new todo list
    Given my todo list can be located by css ".todo-list"
     When I navigate to "${todo.page.url}"
     Then the page title should contain "TodoMVC"
      And my todo list should not be displayed
```

Calls DSL steps:

- [`<element> can be located by <selector> "<expression>"`](/docs/dsl/reference#element-can-be-located-by-selector-expression)
- [`I navigate to "<url>"`](/docs/dsl/reference#i-navigate-to-url)
- [`the page title should[ not] <match> "<expression>"`](/docs/dsl/reference#the-page-title-should-match-expression)
- [`<element> should[ not] be <state>`](/docs/dsl/reference#element-should-be-state)

:::

Notice how the name of the StepDef matches the name of the feature step (excluding the leading *Given* keyword). This is how step definitions bind to feature steps in Gwen; by name. Notice also that the body calls out to several DSL steps to perform the desired operations. Composing StepDefs in this manner is all you need to do to make your features executable.

### StepDefs with parameters

StepDefs can also be declared to accept parameters using one or more `<param-name>` placeholders in the declared name as follows:

:::note Feature Step

```gherkin
  Then the list will contain 2 items
```

:::

:::note StepDef with a parameter

```gherkin {2-3,5}
  @Assertion
  @StepDef
  Scenario: the list will contain <expected-count> items
    Given the item count can be located by css ".todo-count strong"
     Then the item count should be "$<expected-count>"
```

Calls DSL steps:

- [`<element> can be located by <selector> "<expression>"`](/docs/dsl/reference#element-can-be-located-by-selector-expression)
- [`<textRef> should[ not] <match> "<expression>"`](/docs/dsl/reference#text-ref-should-match-expression)

:::

Here the name of the StepDef matches the name of the step in the feature when the value <code>2</code> (in the feature step) is substituted in place of `<expected-count>` in the StepDef name. This is how parameters are passed to StepDefs in Gwen; by substitution. The last step in the body utilises the parameter value as `$<expected-count>`.


### Synchronized StepDefs

In the rare case where you might need to synchronize the execution of your StepDef to a single thread (due to resource contention or a conflict for example), you can do so by tagging it with the `@Synchronized` annotation. Gwen will then guarantee that only one thread will execute your StepDef at any given time when multiple features or scenarios are executed in [parallel mode](/docs/exeuction-modes#parallel) by concurrent threads.
